<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fly USA | Midnight GlassOS</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Libre+Barcode+128&display=swap');

        :root {
            --printer-width: 75mm;
            --os-blue: #3b82f6;
            --os-dark: #0f172a;
        }

        body {
            /* Updated to Blue and Black Gradient */
            background: radial-gradient(circle at top right, #1e293b, #020617);
            background-attachment: fixed;
            font-family: 'Plus Jakarta Sans', sans-serif;
            margin: 0;
            padding: 0;
            color: #ffffff;
            overflow-x: hidden;
            width: 100vw;
            min-height: 100vh;
        }

        /* GlassOS Core Components */
        .glass-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(59, 130, 246, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
        }

        .glass-card-dark {
            background: rgba(2, 6, 23, 0.6);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(59, 130, 246, 0.1);
        }

        .os-button {
            background: rgba(59, 130, 246, 0.15);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .os-button:hover {
            background: rgba(59, 130, 246, 0.3);
            border-color: rgba(59, 130, 246, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
        }

        .os-button:active {
            transform: scale(0.95);
        }

        /* TICKET STYLES (UNTOUCHED) */
        .layout-thermal {
            width: var(--printer-width);
            background: white;
            color: black;
            padding: 4mm;
            box-sizing: border-box;
            border: 1px dashed #ccc;
            margin: 0 auto;
        }

        .layout-modern {
            width: 120mm;
            background: white;
            color: #1a1a1a;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            margin: 0 auto;
        }

        .barcode {
            font-family: 'Libre Barcode 128', cursive;
            font-size: 36px;
            line-height: 1;
        }

        .dashed-line {
            border-top: 1px dashed black;
            margin: 8px 0;
        }

        .label {
            font-size: 7.5pt;
            text-transform: uppercase;
            font-weight: 600;
            color: #666;
        }

        .value {
            font-size: 10.5pt;
            font-weight: 800;
        }

        @media print {
            body { 
                background: white !important; 
                overflow: hidden !important; 
                width: var(--printer-width) !important;
            }
            .no-print { display: none !important; }
            #print-view { 
                display: block !important; 
                position: static !important;
                padding: 0 !important;
                margin: 0 !important;
                width: var(--printer-width) !important;
                background: white !important;
            }
            #print-area {
                width: var(--printer-width) !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            .layout-thermal {
                border: none !important;
                width: var(--printer-width) !important;
                margin: 0 !important;
                padding: 2mm !important;
            }
            @page {
                size: auto;
                margin: 0mm;
            }
        }

        .page-hidden { display: none !important; }
        .page-visible { display: flex !important; }

        .bank-pop {
            animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes pop {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <!-- HOME PAGE -->
    <div id="home-page" class="w-full max-w-4xl space-y-6 page-visible flex-col no-print">
        
        <!-- OS Top Bar -->
        <header class="flex justify-between items-center px-4">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-2xl glass-card flex items-center justify-center font-bold text-lg text-blue-400">
                    <span id="user-initial">G</span>
                </div>
                <div>
                    <h1 class="text-sm font-bold tracking-tight opacity-80">Welcome, Pilot</h1>
                    <p id="display-user" class="text-xs opacity-60">Guest Session</p>
                </div>
            </div>
            <div class="glass-card px-4 py-2 rounded-xl text-[11px] font-bold tracking-widest uppercase flex items-center gap-3 border-blue-500/30">
                <span class="w-2 h-2 bg-blue-400 rounded-full animate-pulse shadow-[0_0_8px_#3b82f6]"></span>
                Network Active
            </div>
        </header>

        <!-- Main Window -->
        <main class="glass-card rounded-[2.5rem] p-8 md:p-12 overflow-hidden relative">
            <!-- Decorative Blue Blob -->
            <div class="absolute -right-20 -top-20 w-80 h-80 bg-blue-600/20 rounded-full blur-[100px] pointer-events-none"></div>
            <div class="absolute -left-20 -bottom-20 w-80 h-80 bg-blue-900/30 rounded-full blur-[100px] pointer-events-none"></div>
            
            <div class="grid grid-cols-1 md:grid-cols-12 gap-10 items-center">
                
                <!-- Left Content -->
                <div class="md:col-span-7 space-y-8 relative z-10">
                    <div>
                        <h2 class="text-4xl md:text-5xl font-extrabold tracking-tighter leading-none mb-4">Fly USA<br><span class="text-blue-400">Control Center</span></h2>
                        <p class="text-sm opacity-70 max-w-xs leading-relaxed">Enter a flight quantity sequence or hub code to initiate automated ticket generation.</p>
                    </div>

                    <div class="space-y-4">
                        <div class="glass-card-dark p-1 rounded-2xl flex items-center pr-4 focus-within:border-blue-500/50 transition-colors">
                            <input type="text" id="scanner-input" oninput="handleMultiInput(this.value)" placeholder="Input Sequence (1-5)" 
                                class="bg-transparent border-none text-white font-bold text-lg px-6 py-4 w-full outline-none placeholder:text-blue-300/20">
                            <kbd class="text-[10px] bg-blue-500/20 text-blue-300 px-2 py-1 rounded uppercase font-mono border border-blue-500/20">Active</kbd>
                        </div>
                        
                        <div class="flex flex-wrap gap-2">
                            <button onclick="startFlightChain(1)" class="os-button px-6 py-2.5 rounded-xl text-xs font-bold text-blue-100 uppercase tracking-wider">1x Leg</button>
                            <button onclick="startFlightChain(3)" class="os-button px-6 py-2.5 rounded-xl text-xs font-bold text-blue-100 uppercase tracking-wider">3x Chain</button>
                            <button onclick="startFlightChain(5)" class="os-button px-6 py-2.5 rounded-xl text-xs font-bold text-blue-100 uppercase tracking-wider">5x Full</button>
                        </div>
                    </div>
                </div>

                <!-- Right Action Section -->
                <div class="md:col-span-5 flex flex-col gap-4 relative z-10">
                    <div id="bank-status-container" class="glass-card-dark rounded-3xl p-6 flex flex-col justify-between h-[280px] transition-all duration-500 border-blue-500/10">
                        <div>
                            <div class="text-[10px] uppercase font-black tracking-widest text-blue-400/40 mb-2">Earnings Balance</div>
                            <div class="text-4xl font-extrabold tracking-tighter">$5.00
